#!/usr/bin/env node
/** Generate minimal 32x32 PNG placeholder for Idea Engine */
const fs = require('fs');
const path = require('path');

// Minimal valid 32x32 grayscale PNG (single color)
const png = Buffer.from([
  0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, // signature
  0x00, 0x00, 0x00, 0x0d, 0x49, 0x48, 0x44, 0x52, // IHDR length + type
  0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x20, // 32x32
  0x08, 0x02, 0x00, 0x00, 0x00, 0xfc, 0x18, 0xed, 0xa3,
  0x00, 0x00, 0x00, 0x09, 0x70, 0x48, 0x59, 0x73, 0x00, 0x00, 0x0b, 0x13,
  0x00, 0x00, 0x0b, 0x13, 0x01, 0x00, 0x9a, 0x9c, 0x18, 0x00, 0x00, 0x00,
  0x07, 0x74, 0x49, 0x4d, 0x45, 0x07, 0xe6, 0x02, 0x13, 0x0c, 0x2e, 0x1f,
  0x6a, 0x4e, 0x4a, 0x00, 0x00, 0x00, 0x1f, 0x49, 0x44, 0x41, 0x54, 0x38,
  0x8d, 0x63, 0x64, 0xc0, 0x0f, 0x18, 0x31, 0x19, 0x8c, 0x98, 0x0c, 0x46,
  0x4c, 0x06, 0x23, 0x26, 0x83, 0x11, 0x93, 0xc1, 0x88, 0xc9, 0x60, 0xc4,
  0x64, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x03, 0x00, 0xfa, 0x34, 0x7f,
  0x7f, 0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4e, 0x44, 0xae, 0x42, 0x60,
  0x82
]);

const iconsDir = path.join(__dirname, '../apps/desktop/src-tauri/icons');
fs.mkdirSync(iconsDir, { recursive: true });
fs.writeFileSync(path.join(iconsDir, '32x32.png'), png);
// Copy for other sizes (Tauri will use 32x32 as fallback)
['128x128.png', '128x128@2x.png'].forEach((f) => {
  fs.copyFileSync(path.join(iconsDir, '32x32.png'), path.join(iconsDir, f));
});
console.log('Icons generated. Run "pnpm tauri icon your-icon.png" for production icons.');
